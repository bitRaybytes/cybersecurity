# üìù Pentest/CTF Report
> **Hinweis** Diese Dokumentation dient nur zu √úbungszwecken und soll zeigen, wie ein Pentest-Report aufgebaut ist. 
> Den ausf√ºhrlichen Test zum Metasploit auf Metasploitable2 findest du [hier](/09-practice-labs/metasploitable2/metasploit-vsftpd-backdoor.md)


## Inhaltsverzeichnis
- [1. Allgemeine Informationen](#1-allgemeine-informationen)
- [2. Zielsetzung](#2-zielsetzung)
- [3. Reconnaissance (Informationsbeschaffung)](#3-reconnaissance-informationsbeschaffung)
- [4. Enumeration](#4-enumeration)
- [5. Exploitation](#5-exploitation)
- [6. Post-Exploitation](#6-post-exploitation)
- [7. Ergebnisse / Flags](#7-ergebnisse--flags)
- [8. Schutzma√ünahmen](#8-schutzma√ünahmen)
- [9. Lessons Learned](#9-lessons-learned)
- [10. Anhang](#10-anhang)




<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 1. Allgemeine Informationen
- **Titel:** vsftpd-Exploitation auf Metasploitable2
- **Autor:** bitRaybytes aka. itsRay
- **Datum:** 04.09.2025
- **√úbung/Challenge/CTF:** Metasploitable2 Lab
- **Zielsystem/Scope:** Metasploitable2 VM (IP-Adresse: 192.168.1.102)
- **Verwendete Tools:** Nmap, Metasploit Framework (msfconsole), Netcat, Bash



<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 2. Zielsetzung
- **Beschreibung:**  
Das Ziel dieses Tests war es, eine systematische Vorgehensweise im Rahmen eines Penetrationstests zu demonstrieren. Dabei sollte eine bekannte Schwachstelle auf einem Zielsystem ausgenutzt werden, um sich Zugriff zu verschaffen und diesen Zugriff f√ºr zuk√ºnftige Zwecke zu sichern.

- **Was war die Aufgabe / das Szenario?**  
`n/A`

- **Was ist das angestrebte Ziel (z. B. Root-Rechte, Flag finden, Exploit testen)?**  
Das Hauptziel war das Erlangen einer Root-Shell-Session auf der Metasploitable2 VM. Anschlie√üend sollte eine persistente Backdoor eingerichtet werden, um den Zugriff auch nach einem Neustart des Systems aufrechtzuerhalten.



<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 3. Reconnaissance (Informationsbeschaffung)
- **Passive Recon:**  
Es wurde keine passive Reconnaissance durchgef√ºhrt, da es sich um eine isolierte Laborumgebung handelte.

- **Active Recon:**  
Zuerst wurde ein Netzwerksweep mit `nmap -sP 192.168.1.0/24` durchgef√ºhrt, um aktive Hosts im Netzwerk zu identifizieren. Anschlie√üend wurde das Zielsystem mit einem Service- und Versionsscan (Nmap: `nmap -sS -sV 192.168.1.102`) genauer untersucht.




<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 4. Enumeration
- **Laufende Dienste und Schwachstellen**
Der detaillierte Nmap-Scan ergab, dass der FTP-Dienst vsftpd 2.3.4 auf Port 21 l√§uft. Diese spezifische Version ist √∂ffentlich bekannt f√ºr eine kritische Backdoor-Schwachstelle, die eine direkte Root-Shell erm√∂glicht.

- **Code-Snippets:**
```bash
PORT   STATE SERVICE VERSION
21/tcp open  ftp     vsftpd 2.3.4
```



<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 5. Exploitation
- **Ausgef√ºhrte Schritte & Befehle**
Das Metasploit Framework wurde √ºber `msfconsole` gestartet. Nach der Suche nach geeigneten Modulen wurde der Exploit `exploit/unix/ftp/vsftpd_234_backdoor` ausgew√§hlt.

- Beispiel:
```bash
msfconsole
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.0.10
run
```

- **Ergebnis:**
Der Exploit war erfolgreich und √∂ffnete eine Command-Shell-Session auf der Metasploitable2 VM, wie durch die Best√§tigungsmeldung `Command shell session 1 opened` angezeigt wurde.



<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 6. Post-Exploitation
- **Welche Rechte erlangt?**
Mittels des Befehls `whoami` wurde best√§tigt, dass der Zugriff direkt als `root`-Benutzer erfolgte.

- **Persistenz**
Um den Zugriff zu sichern, wurde eine persistente Backdoor mithilfe eines Bash-Skripts in der `crontab` des Root-Benutzers eingerichtet. Das Skript verbindet sich beim Systemstart automatisch mit einem Netcat-Listener auf dem Angreifersystem. Alternativ wurde auch ein neuer Benutzer (`redteam`) mit Root-Rechten erstellt.

- **Sensible Daten gefunden?**
In diesem Labor-Szenario wurden keine sensiblen Daten gesucht oder gefunden.



<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 7. Ergebnisse / Flags
Es gab keine spezifischen Flags in dieser √úbung. Das erfolgreiche Erlangen der Root-Shell wurde als Zielerreichung gewertet.



<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 8. Schutzma√ünahmen
- **Patchen der Schwachstelle:** Die vsftpd-Installation muss auf eine aktuelle und sichere Version aktualisiert werden, um diese bekannte Schwachstelle zu schlie√üen.
- **H√§rtung der Dienste:** Nicht ben√∂tigte Dienste sollten deaktiviert werden. Die Konfiguration des FTP-Dienstes sollte auf Best Practices √ºberpr√ºft und geh√§rtet werden.
- **Netzwerksegmentierung / Firewall-Regeln:** Systeme, die sensible Dienste hosten, sollten in einem isolierten Netzwerksegment betrieben werden. Eine Firewall sollte den Zugriff auf interne Dienste aus dem Internet blockieren.



<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 9. Lessons Learned
- **Was lief gut?** Die systematische Vorgehensweise, von der Aufkl√§rung √ºber die Identifizierung der Schwachstelle bis zur Ausnutzung, war effizient und erfolgreich. Die Verwendung des Metasploit-Frameworks beschleunigte den Prozess erheblich.
- **Was war schwierig?** Es gab keine nennenswerten Schwierigkeiten in diesem kontrollierten Laborszenario.
- **Welche Tools/Techniken neu gelernt?** Die vsftpd-Backdoor-Schwachstelle und Methoden zur Persistenz (Crontab-Backdoor) wurden vertieft.



<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## 10. Anhang
- Vollst√§ndige Scans: n/a
- Screenshots: n/a
- Links / Referenzen: n/a






<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>


## Haftungsausschluss

Dieses Repository dient ausschlie√ülich zu Ausbildungs-, Forschungs- und Demonstrationszwecken im Bereich der IT-Sicherheit.

Alle hier dokumentierten Techniken und Tools d√ºrfen nur in legalen und autorisierten Testumgebungen verwendet werden ‚Äì z.‚ÄØB. in Labors, CTFs oder mit ausdr√ºcklicher Genehmigung des Eigent√ºmers der Zielsysteme.

Wir distanzieren uns ausdr√ºcklich von jeglicher illegalen Nutzung.
Dieses Projekt richtet sich an White-Hat-Sicherheitsforscher, Ethical Hacker und Auszubildende, die ethisch und rechtlich korrekt handeln.

[Disclaimer](/00-disclaimer/disclaimer.md)

--- 

<div align=right>

[‚Üë Inhaltsverzeichnis](#inhaltsverzeichnis)

</div>

Stay curious ‚Äì stay secure. üîê

üóìÔ∏è **Letzte Aktualisierung:** August 2025  
ü§ù **Pull Requests willkommen** ‚Äì Vorschl√§ge f√ºr neue Kurse oder Kategorien gerne einreichen!

---